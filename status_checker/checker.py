import asyncio
import socket

from mcstatus import JavaServer

ips = """185.255.76.163:25565
83.223.192.3:25565
83.223.192.2:25565
83.223.192.4:25565
83.223.192.5:25565
83.223.192.6:25565
83.223.192.8:25565
83.223.192.7:25565
83.223.192.9:25565
83.223.192.10:25565
83.223.192.12:25565
83.223.192.13:25565
83.223.192.14:25565
83.223.192.15:25565
83.223.192.16:25565
83.223.192.17:25565
83.223.192.18:25565
83.223.192.20:25565
83.223.192.19:25565
83.223.192.21:25565
83.223.192.23:25565
83.223.192.22:25565
83.223.192.24:25565
83.223.192.25:25565
83.223.192.29:25565
83.223.192.26:25565
83.223.192.30:25565
83.223.192.28:25565
83.223.192.31:25565
83.223.192.32:25565
83.223.192.33:25565
83.223.192.34:25565
83.223.192.36:25565
83.223.192.35:25565
83.223.192.37:25565
83.223.192.39:25565
83.223.192.38:25565
83.223.192.43:25565
83.223.192.44:25565
83.223.192.45:25565
83.223.192.46:25565
83.223.192.47:25565
83.223.192.48:25565
83.223.192.49:25565
83.223.192.50:25565
83.223.192.51:25565
83.223.192.52:25565
83.223.192.57:25565
83.223.192.54:25565
83.223.192.53:25565
83.223.192.60:25565
83.223.192.59:25565
83.223.192.55:25565
83.223.192.63:25565
83.223.192.61:25565
83.223.192.62:25565
83.223.192.64:25565
83.223.192.65:25565
83.223.192.66:25565
83.223.192.68:25565
83.223.192.67:25565
83.223.192.71:25565
83.223.192.69:25565
83.223.192.73:25565
83.223.192.77:25565
83.223.192.75:25565
83.223.192.80:25565
83.223.192.78:25565
83.223.192.76:25565
83.223.192.79:25565
83.223.192.83:25565
83.223.192.84:25565
83.223.192.81:25565
83.223.192.85:25565
83.223.192.87:25565
83.223.192.89:25565
83.223.192.92:25565
83.223.192.90:25565
83.223.192.91:25565
83.223.192.96:25565
83.223.192.95:25565
83.223.192.94:25565
83.223.192.97:25565
83.223.192.99:25565
83.223.192.101:25565
83.223.192.102:25565
83.223.192.103:25565
83.223.192.93:25565
83.223.192.104:25565
83.223.192.108:25565
83.223.192.106:25565
83.223.192.107:25565
83.223.192.111:25565
83.223.192.109:25565
83.223.192.114:25565
83.223.192.112:25565
83.223.192.110:25565
83.223.192.115:25565
83.223.192.116:25565
83.223.192.117:25565
83.223.192.119:25565
83.223.192.118:25565
83.223.192.123:25565
83.223.192.121:25565
83.223.192.120:25565
83.223.192.124:25565
83.223.192.125:25565
83.223.192.128:25565
83.223.192.126:25565
83.223.192.127:25565
83.223.192.129:25565
83.223.192.130:25565
83.223.192.134:25565
83.223.192.131:25565
83.223.192.132:25565
83.223.192.133:25565
83.223.192.135:25565
83.223.192.138:25565
83.223.192.136:25565
83.223.192.137:25565
83.223.192.139:25565
83.223.192.140:25565
83.223.192.143:25565
83.223.192.141:25565
83.223.192.142:25565
83.223.192.144:25565
83.223.192.147:25565
83.223.192.148:25565
83.223.192.149:25565
83.223.192.151:25565
83.223.192.155:25565
83.223.192.153:25565
83.223.192.156:25565
83.223.192.158:25565
83.223.192.160:25565
83.223.192.161:25565
83.223.192.162:25565
83.223.192.163:25565
83.223.192.164:25565
83.223.192.165:25565
83.223.192.168:25565
83.223.192.169:25565
83.223.192.173:25565
83.223.192.171:25565
83.223.192.172:25565
83.223.192.176:25565
83.223.192.175:25565
83.223.192.179:25565
83.223.192.178:25565
83.223.192.180:25565
83.223.192.181:25565
83.223.192.183:25565
83.223.192.185:25565
83.223.192.186:25565
83.223.192.182:25565
83.223.192.187:25565
83.223.192.191:25565
83.223.192.189:25565
83.223.192.192:25565
83.223.192.190:25565
83.223.192.193:25565
83.223.192.195:25565
83.223.192.196:25565
83.223.192.197:25565
83.223.192.198:25565
83.223.192.200:25565
83.223.192.201:25565
83.223.192.202:25565
83.223.192.204:25565
83.223.192.205:25565
83.223.192.206:25565
83.223.192.207:25565
83.223.192.209:25565
83.223.192.212:25565
83.223.192.213:25565
83.223.192.211:25565
83.223.192.214:25565
83.223.192.218:25565
83.223.192.219:25565
83.223.192.221:25565
83.223.192.222:25565
83.223.192.228:25565
178.250.48.155:25565
185.230.148.9:25565
185.230.148.15:25565
185.230.148.14:25565
185.230.148.113:25565
181.215.226.71:25565
102.177.127.251:25565
103.105.48.26:25565
103.105.50.140:25565
103.105.50.210:25565
185.114.123.10:25565
185.114.123.120:25565
185.114.123.251:25565
91.207.174.102:25565
185.242.7.19:25565
185.242.7.18:25565
185.242.7.22:25565
185.242.7.23:25565
185.242.7.38:25565
185.242.7.46:25565
185.242.7.51:25565
185.242.7.57:25565
185.242.7.60:25565
185.242.7.64:25565
185.242.7.78:25565
185.242.7.81:25565
185.242.7.87:25565
185.242.7.91:25565
185.242.7.103:25565
185.242.7.114:25565
185.242.7.126:25565
185.242.7.147:25565
185.242.7.157:25565
185.242.7.172:25565
185.242.7.162:25565
185.242.7.170:25565
185.5.172.2:25565
74.119.149.51:25565
74.220.16.51:25565
91.208.99.4:25565
91.208.111.40:25565
104.76.222.16:25565
185.121.136.6:25565
185.121.136.4:25565
193.42.40.107:25565
185.251.116.125:25565
2.58.45.6:25565
2.58.47.5:25565
2.58.47.8:25565
2.58.47.126:25565
185.16.225.138:25565
193.57.159.44:25565
193.57.159.19:25565
91.216.105.6:25565
91.216.105.26:25565
91.216.105.46:25565
91.216.105.51:25565
91.216.105.56:25565
91.216.105.61:25565
91.216.105.157:25565
91.216.105.151:25565
"""


async def check(address=None, ip=None, port=None):
    try:
        server = await JavaServer.async_lookup(address or f'{ip}:{port}', timeout=1)
        print(f'{address} {server.status().raw}')
        with open('good.txt', 'a') as file:
            file.write(f'{address} {server.status().raw}\n')
    except socket.timeout:
        # print("timeout")
        pass
    except OSError:
        # print('Pizda OSError')
        pass
    except Exception:
        pass


loop = asyncio.get_event_loop()
tasks = []
for ip in ips.split('\n'):
    tasks.append(loop.create_task(check(ip)))
asyncio.gather(*tasks)
loop.run_forever()
